(function () {

    function World (renderer, person) {
        this.renderer = renderer;
        this.person = person;
    };

    World.prototype.run = function () {
        process.stdin.setRawMode(true);
        process.stdin.resume();
        process.stdin.setEncoding('utf8');

        var context = this;
        
        process.stdin.on('data', function(key) {
            if (key === "\u001b[A") {
                context.person.moveVertical(-1);
                context.renderer.render();
            } else if (key === "\u001b[B") {
                context.person.moveVertical(1);
                context.renderer.render();
            } else if (key === "\u001b[C") {
                context.person.moveHorizontal(1);
                context.renderer.render();
            }  else if (key === "\u001b[D") {
                context.person.moveHorizontal(-1);
                context.renderer.render();
            }
            if (key === "\u001b" || key === "\u0003") {
                process.exit();
            }
        });

        this.renderer.render();
    };

    exports = module.exports = World;

}).call(this);

